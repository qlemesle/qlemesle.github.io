<!doctype html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>Titre de la page</title>
    </head>
        <body>
            <canvas id="myCanvas" width="500" height="200"></canvas>
        </body>
</html>
<script type="text/javascript">

    window.addEventListener('load', (event) => {
        let chrono = document.createElement("h1");
        let time = 10;
        chrono.innerHTML = time;

        let nIntervId;
        
        function changeChrono() {
            nIntervId = setInterval(flashChrono, 1000);
        }

        function flashChrono() {
            time = time - 1;
            if(time > -1){
                chrono.innerHTML = time;
            }else{
                chrono.innerHTML = "temps écoulé";
                stopChrono();
            }
        }
 
        function stopChrono() {
            clearInterval(nIntervId);
            console.log("chrono arrêté");
        }

        changeChrono();
        document.body.appendChild(chrono);

    /* ------------------------------------exercice 2------------------------------------------- */

        let canvas = document.getElementById('myCanvas');
        let ctx = canvas.getContext('2d');
        let intervalSquare;
        
        function mouveSquare() {
            intervalSquare = setInterval(flashSquare, 50);
        }

        let mvment = 0;
        
        function flashSquare() {
            ctx.clearRect(0,0,500,200);
            ctx.rect(mvment, 10, 100, 100);
            ctx.fillStyle = "red";
            ctx.fill();
            mvment = mvment + 10;
            if(mvment >= (500-100)){
                stopSquare();
            }
        }
 
        function stopSquare() {
            clearInterval(intervalSquare);
            console.log("dessin stop");
        }

        mouveSquare();
    });
    
</script>
