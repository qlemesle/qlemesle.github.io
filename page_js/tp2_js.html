<!doctype html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>Titre de la page</title>
    </head>
        <body>
            <canvas id="myCanvas" width="500" height="200"></canvas>
        </body>
</html>
<script type="text/javascript">

    window.addEventListener('load', (event) => {
        let chrono = document.createElement("h1");
        let time = 10;
        chrono.innerHTML = time;

        let nIntervId;
        
        function changeChrono() {
            nIntervId = setInterval(flashChrono, 1000);
        }

        function flashChrono() {
            time = time - 1;
            if(time > -1){
                chrono.innerHTML = time;
            }else{
                chrono.innerHTML = "temps écoulé";
                stopChrono();
            }
        }
 
        function stopChrono() {
            clearInterval(nIntervId);
            console.log("chrono arrêté");
        }

        changeChrono();
        document.body.appendChild(chrono);

    /* ------------------------------------exercice 2------------------------------------------- */

        let canvas = document.getElementById('myCanvas');
        let ctx = canvas.getContext('2d');
        ctx.fillStyle = "red";
        let intervalSquare;
        
        function mouveSquare_to_right() {
            intervalSquare = setInterval(to_right_Square, 50);
        }
        function mouveSquare_to_left() {
            intervalSquare = setInterval(to_left_Square, 50);
        }

        let mvment = 0;
        
        function to_right_Square() {
            ctx.clearRect(10,10,mvment+100,mvment+100);
            ctx.fillRect(10+mvment, 10, 100, 100);
            mvment = mvment + 10;
            if(mvment >= (500-100)){
                stopSquare_r();
            }
        }

        function to_left_Square() {
            ctx.clearRect(10,10,mvment+100,mvment+100);
            ctx.fillRect(mvment - 10, 10, 100, 100);
            mvment = mvment - 10;
            if(mvment <= (10)){
                stopSquare_l();
            }
        }
 
        function stopSquare_r() {
            clearInterval(intervalSquare);
            mouveSquare_to_left();
        }
        function stopSquare_l() {
            clearInterval(intervalSquare);
            mouveSquare_to_right();
        }

        mouveSquare_to_right();
    });
    
</script>
